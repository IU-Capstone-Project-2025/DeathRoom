# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DeathRoom

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ DeathRoom, –≤–∫–ª—é—á–∞—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏.

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–∏—Ä–∞–º–∏–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```mermaid
graph TB
    E2E[üéØ E2E Tests<br/>- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∏–≥—Ä—ã<br/>- –ö–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ<br/>- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ, –¥–æ—Ä–æ–≥–∏–µ]
    
    Integration[üîó Integration Tests<br/>- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ<br/>- –°–µ—Ç–µ–≤—ã–µ –ø–∞–∫–µ—Ç—ã<br/>- –°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å]
    
    Unit[‚öôÔ∏è Unit Tests<br/>- –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã<br/>- –ë—ã—Å—Ç—Ä—ã–µ, –¥–µ—à–µ–≤—ã–µ<br/>- –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]
    
    E2E -->|–û—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞| Integration
    Integration -->|–û—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞| Unit
    
    classDef e2e fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    classDef integration fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef unit fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    
    class E2E e2e
    class Integration integration
    class Unit unit
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–ë—ã—Å—Ç—Ä–æ—Ç–∞**: Unit —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ (< 1 —Å–µ–∫—É–Ω–¥—ã)
3. **–ò–∑–æ–ª—è—Ü–∏—è**: –¢–µ—Å—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–∏—Å–µ—Ç—å –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
4. **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏
5. **–ü–æ–∫—Ä—ã—Ç–∏–µ**: –°—Ç—Ä–µ–º–∏—Ç—å—Å—è –∫ –≤—ã—Å–æ–∫–æ–º—É –ø–æ–∫—Ä—ã—Ç–∏—é –∫–æ–¥–∞

## Unit —Ç–µ—Å—Ç—ã

### –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏
```csharp
[TestFixture]
public class PlayerTests
{
    [Test]
    public void TakeDamage_WithArmor_ShouldReduceArmorFirst()
    {
        // Arrange
        var player = new Player { Id = 1, Username = "TestPlayer" };
        player.PlayerState.HealthPoint = 100;
        player.PlayerState.ArmorPoint = 50;
        
        // Act
        var isKill = player.TakeDamage(30, 1000);
        
        // Assert
        Assert.IsFalse(isKill);
        Assert.AreEqual(70, player.PlayerState.HealthPoint);
        Assert.AreEqual(20, player.PlayerState.ArmorPoint);
    }
    
    [Test]
    public void TakeDamage_WithoutArmor_ShouldReduceHealth()
    {
        // Arrange
        var player = new Player { Id = 1, Username = "TestPlayer" };
        player.PlayerState.HealthPoint = 100;
        player.PlayerState.ArmorPoint = 0;
        
        // Act
        var isKill = player.TakeDamage(30, 1000);
        
        // Assert
        Assert.IsFalse(isKill);
        Assert.AreEqual(70, player.PlayerState.HealthPoint);
        Assert.AreEqual(0, player.PlayerState.ArmorPoint);
    }
    
    [Test]
    public void TakeDamage_LethalDamage_ShouldKillPlayer()
    {
        // Arrange
        var player = new Player { Id = 1, Username = "TestPlayer" };
        player.PlayerState.HealthPoint = 50;
        player.PlayerState.ArmorPoint = 0;
        
        // Act
        var isKill = player.TakeDamage(100, 1000);
        
        // Assert
        Assert.IsTrue(isKill);
        Assert.AreEqual(0, player.PlayerState.HealthPoint);
    }
}
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
```csharp
[TestFixture]
public class HitPhysicsServiceTests
{
    private HitPhysicsService _service;
    
    [SetUp]
    public void Setup()
    {
        _service = new HitPhysicsService();
    }
    
    [Test]
    public void ValidateHit_ValidHit_ShouldReturnTrue()
    {
        // Arrange
        var attacker = new Player { Id = 1 };
        attacker.PlayerState.Position = new Vector3(0, 0, 0);
        
        var target = new Player { Id = 2 };
        target.PlayerState.Position = new Vector3(10, 0, 0);
        
        var direction = new Vector3(1, 0, 0);
        
        // Act
        var result = _service.ValidateHit(attacker, target, direction);
        
        // Assert
        Assert.IsTrue(result);
    }
    
    [Test]
    public void ValidateHit_TooFarDistance_ShouldReturnFalse()
    {
        // Arrange
        var attacker = new Player { Id = 1 };
        attacker.PlayerState.Position = new Vector3(0, 0, 0);
        
        var target = new Player { Id = 2 };
        target.PlayerState.Position = new Vector3(100, 0, 0);
        
        var direction = new Vector3(1, 0, 0);
        
        // Act
        var result = _service.ValidateHit(attacker, target, direction);
        
        // Assert
        Assert.IsFalse(result);
    }
}
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```csharp
[TestFixture]
public class PacketSerializationTests
{
    [Test]
    public void PlayerMovePacket_Serialization_ShouldWork()
    {
        // Arrange
        var packet = new PlayerMovePacket
        {
            Position = new Vector3Serializable(1, 2, 3),
            Rotation = new Vector3Serializable(45, 90, 180),
            ClientTick = 12345
        };
        
        // Act
        var data = MessagePackSerializer.Serialize(packet);
        var deserialized = MessagePackSerializer.Deserialize<PlayerMovePacket>(data);
        
        // Assert
        Assert.AreEqual(packet.Position.X, deserialized.Position.X);
        Assert.AreEqual(packet.Position.Y, deserialized.Position.Y);
        Assert.AreEqual(packet.Position.Z, deserialized.Position.Z);
        Assert.AreEqual(packet.Rotation.X, deserialized.Rotation.X);
        Assert.AreEqual(packet.ClientTick, deserialized.ClientTick);
    }
}
```

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Unity –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```csharp
[TestFixture]
public class PlayerMovementTests
{
    private GameObject _playerObject;
    private PlayerMovement _playerMovement;
    
    [SetUp]
    public void Setup()
    {
        _playerObject = new GameObject("TestPlayer");
        _playerMovement = _playerObject.AddComponent<PlayerMovement>();
    }
    
    [TearDown]
    public void Teardown()
    {
        Object.DestroyImmediate(_playerObject);
    }
    
    [Test]
    public void Move_ValidDirection_ShouldUpdatePosition()
    {
        // Arrange
        var initialPosition = _playerObject.transform.position;
        var direction = new Vector3(1, 0, 0);
        
        // Act
        _playerMovement.Move(direction);
        
        // Assert
        Assert.AreNotEqual(initialPosition, _playerObject.transform.position);
    }
}
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–π –ª–æ–≥–∏–∫–∏
```csharp
[TestFixture]
public class NetworkPlayerTests
{
    [Test]
    public void UpdateState_NewPosition_ShouldInterpolate()
    {
        // Arrange
        var networkPlayer = new NetworkPlayer();
        var oldState = new PlayerState
        {
            Position = new Vector3Serializable(0, 0, 0)
        };
        var newState = new PlayerState
        {
            Position = new Vector3Serializable(10, 0, 0)
        };
        
        networkPlayer.Initialize(oldState);
        
        // Act
        networkPlayer.UpdateState(newState);
        
        // Assert
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
        Assert.IsTrue(networkPlayer.IsInterpolating);
    }
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
```csharp
[TestFixture]
public class ClientServerIntegrationTests
{
    private GameServer _server;
    private Client _client;
    
    [SetUp]
    public void Setup()
    {
        _server = new GameServer();
        _server.Start();
        
        _client = new Client();
    }
    
    [TearDown]
    public void Teardown()
    {
        _client?.Disconnect();
        _server?.Stop();
    }
    
    [Test]
    public async Task PlayerConnection_ShouldCreateSession()
    {
        // Arrange
        var loginPacket = new LoginPacket { Username = "TestPlayer" };
        
        // Act
        var connected = await _client.ConnectAsync("localhost", 9050);
        var loginResult = await _client.SendPacketAsync(loginPacket);
        
        // Assert
        Assert.IsTrue(connected);
        Assert.IsTrue(loginResult);
        Assert.IsTrue(_server.HasPlayer("TestPlayer"));
    }
    
    [Test]
    public async Task PlayerMovement_ShouldSyncToOtherPlayers()
    {
        // Arrange
        var client1 = new Client();
        var client2 = new Client();
        
        await client1.ConnectAsync("localhost", 9050);
        await client2.ConnectAsync("localhost", 9050);
        
        var movePacket = new PlayerMovePacket
        {
            Position = new Vector3Serializable(10, 0, 0),
            Rotation = new Vector3Serializable(0, 90, 0)
        };
        
        // Act
        await client1.SendPacketAsync(movePacket);
        await Task.Delay(100); // –ñ–¥–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
        
        // Assert
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Ç–æ—Ä–æ–π –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        var worldState = client2.GetLastWorldState();
        Assert.IsNotNull(worldState);
        Assert.IsTrue(worldState.PlayerStates.Any(p => p.Position.X > 5));
    }
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
```csharp
[TestFixture]
public class PacketIntegrationTests
{
    [Test]
    public void PacketFlow_LoginToGameplay_ShouldWork()
    {
        // Arrange
        var packetHandler = new PacketHandlerService();
        var mockPeer = CreateMockPeer();
        
        // Act & Assert
        // 1. –õ–æ–≥–∏–Ω
        var loginPacket = new LoginPacket { Username = "TestPlayer" };
        var loginResult = packetHandler.HandlePacket(mockPeer, SerializePacket(loginPacket));
        Assert.IsTrue(loginResult);
        
        // 2. –î–≤–∏–∂–µ–Ω–∏–µ
        var movePacket = new PlayerMovePacket
        {
            Position = new Vector3Serializable(1, 0, 0),
            Rotation = new Vector3Serializable(0, 0, 0)
        };
        var moveResult = packetHandler.HandlePacket(mockPeer, SerializePacket(movePacket));
        Assert.IsTrue(moveResult);
        
        // 3. –°—Ç—Ä–µ–ª—å–±–∞
        var hitPacket = new PlayerHitPacket
        {
            TargetId = 2,
            Direction = new Vector3Serializable(1, 0, 0)
        };
        var hitResult = packetHandler.HandlePacket(mockPeer, SerializePacket(hitPacket));
        Assert.IsTrue(hitResult);
    }
}
```

## E2E —Ç–µ—Å—Ç—ã

### –ü–æ–ª–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
```csharp
[TestFixture]
public class EndToEndGameTests
{
    private GameServer _server;
    private List<Client> _clients;
    
    [SetUp]
    public void Setup()
    {
        _server = new GameServer();
        _server.Start();
        _clients = new List<Client>();
    }
    
    [TearDown]
    public void Teardown()
    {
        foreach (var client in _clients)
        {
            client.Disconnect();
        }
        _server.Stop();
    }
    
    [Test]
    public async Task FullGameSession_ShouldCompleteSuccessfully()
    {
        // Arrange
        var player1 = new Client();
        var player2 = new Client();
        _clients.Add(player1);
        _clients.Add(player2);
        
        // Act
        // 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤
        await player1.ConnectAsync("localhost", 9050);
        await player2.ConnectAsync("localhost", 9050);
        
        await player1.LoginAsync("Player1");
        await player2.LoginAsync("Player2");
        
        // 2. –ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å
        for (int i = 0; i < 10; i++)
        {
            await player1.MoveAsync(new Vector3(i, 0, 0));
            await player2.MoveAsync(new Vector3(0, 0, i));
            await Task.Delay(16); // 60 FPS
        }
        
        // 3. –°—Ç—Ä–µ–ª—å–±–∞
        await player1.ShootAsync(player2.GetPlayerId());
        
        // Assert
        Assert.IsTrue(player1.IsConnected);
        Assert.IsTrue(player2.IsConnected);
        Assert.IsTrue(player2.GetHealth() < 100); // –ü–æ–ª—É—á–∏–ª —É—Ä–æ–Ω
    }
}
```

## –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```csharp
[TestFixture]
public class PerformanceTests
{
    [Test]
    public async Task ServerPerformance_100Players_ShouldHandleLoad()
    {
        // Arrange
        var server = new GameServer();
        server.Start();
        
        var clients = new List<Client>();
        var tasks = new List<Task>();
        
        // Act
        // –°–æ–∑–¥–∞–µ–º 100 –∫–ª–∏–µ–Ω—Ç–æ–≤
        for (int i = 0; i < 100; i++)
        {
            var client = new Client();
            clients.Add(client);
            
            var task = Task.Run(async () =>
            {
                await client.ConnectAsync("localhost", 9050);
                await client.LoginAsync($"Player{i}");
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                for (int j = 0; j < 100; j++)
                {
                    await client.MoveAsync(new Vector3(j, 0, 0));
                    await Task.Delay(16);
                }
            });
            
            tasks.Add(task);
        }
        
        // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
        await Task.WhenAll(tasks);
        
        // Assert
        Assert.IsTrue(server.GetPlayerCount() == 100);
        Assert.IsTrue(server.GetAveragePing() < 100); // Ping < 100ms
        Assert.IsTrue(server.GetMemoryUsage() < 2 * 1024 * 1024 * 1024); // < 2GB
    }
}
```

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### .NET —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```xml
<!-- DeathRoom.Tests.csproj -->
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <IsPackable>false</IsPackable>
  </PropertyGroup>
  
  <ItemGroup>
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.8.0" />
    <PackageReference Include="NUnit" Version="4.0.1" />
    <PackageReference Include="NUnit3TestAdapter" Version="4.5.0" />
    <PackageReference Include="Moq" Version="4.20.70" />
    <PackageReference Include="FluentAssertions" Version="6.12.0" />
  </ItemGroup>
  
  <ItemGroup>
    <ProjectReference Include="../DeathRoom.Domain/DeathRoom.Domain.csproj" />
    <ProjectReference Include="../DeathRoom.Application/DeathRoom.Application.csproj" />
    <ProjectReference Include="../DeathRoom.Common/DeathRoom.Common.csproj" />
  </ItemGroup>
</Project>
```

### Unity —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```csharp
// TestRunner –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
[TestFixture]
public class UnityTests
{
    [UnityTest]
    public IEnumerator PlayerMovement_ShouldUpdateTransform()
    {
        // Arrange
        var player = new GameObject("TestPlayer");
        var movement = player.AddComponent<PlayerMovement>();
        
        // Act
        movement.Move(new Vector3(1, 0, 0));
        
        // –ñ–¥–µ–º –æ–¥–∏–Ω –∫–∞–¥—Ä
        yield return null;
        
        // Assert
        Assert.AreNotEqual(Vector3.zero, player.transform.position);
    }
}
```

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### CI/CD Pipeline
```yaml
# .github/workflows/test.yml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup .NET
      uses: actions/setup-dotnet@v3
      with:
        dotnet-version: 8.0.x
    
    - name: Restore dependencies
      run: dotnet restore
    
    - name: Build
      run: dotnet build --no-restore
    
    - name: Test
      run: dotnet test --no-build --verbosity normal
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3
      with:
        file: ./coverage.xml
```

### –õ–æ–∫–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
dotnet test

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
dotnet test --collect:"XPlat Code Coverage"

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
dotnet test --filter "TestCategory=Unit"

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
dotnet test --logger "console;verbosity=detailed"
```

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- **–¶–µ–ª—å**: > 80% –ø–æ–∫—Ä—ã—Ç–∏–µ
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–¥**: > 90% –ø–æ–∫—Ä—ã—Ç–∏–µ
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç**: dotCover, Codecov

### –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Unit —Ç–µ—Å—Ç—ã**: < 1 —Å–µ–∫—É–Ω–¥—ã –∫–∞–∂–¥—ã–π
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: < 10 —Å–µ–∫—É–Ω–¥ –∫–∞–∂–¥—ã–π
- **E2E —Ç–µ—Å—Ç—ã**: < 60 —Å–µ–∫—É–Ω–¥ –∫–∞–∂–¥—ã–π

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: > 95% —É—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–æ–≥–æ–Ω–æ–≤
- **–§–ª–∞–∫–∏**: < 1% –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- **–ü–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å**: –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
1. **AAA –ø–∞—Ç—Ç–µ—Ä–Ω**: Arrange, Act, Assert
2. **–û–¥–∏–Ω —Ç–µ—Å—Ç - –æ–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞**
3. **–ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤**
4. **–ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤**

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
```csharp
[TestFixture]
public class PlayerServiceTests
{
    // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
    [TestFixture]
    public class DamageTests
    {
        [Test]
        public void TakeDamage_WithArmor_ShouldReduceArmorFirst() { }
        
        [Test]
        public void TakeDamage_WithoutArmor_ShouldReduceHealth() { }
    }
    
    [TestFixture]
    public class MovementTests
    {
        [Test]
        public void Move_ValidPosition_ShouldUpdateState() { }
        
        [Test]
        public void Move_InvalidPosition_ShouldReject() { }
    }
}
```

### Mock –æ–±—ä–µ–∫—Ç—ã
```csharp
[Test]
public void HandlePacket_WithMockPeer_ShouldProcessCorrectly()
{
    // Arrange
    var mockPeer = new Mock<NetPeer>();
    var mockLogger = new Mock<ILogger<PacketHandlerService>>();
    var service = new PacketHandlerService(mockLogger.Object);
    
    var packet = new LoginPacket { Username = "TestPlayer" };
    var data = MessagePackSerializer.Serialize(packet);
    
    // Act
    service.HandlePacket(mockPeer.Object, data);
    
    // Assert
    mockLogger.Verify(x => x.LogInformation(It.IsAny<string>()), Times.Once);
}
```

## –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö
```csharp
[Test]
public void ComplexTest_WithLogging_ShouldWork()
{
    // Arrange
    var logger = new ConsoleLogger();
    logger.LogInformation("Starting complex test");
    
    // Act
    var result = PerformComplexOperation();
    
    // Assert
    logger.LogInformation($"Test completed with result: {result}");
    Assert.IsTrue(result);
}
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```csharp
[Test]
public void PerformanceTest_WithMetrics_ShouldMeetRequirements()
{
    // Arrange
    var stopwatch = Stopwatch.StartNew();
    
    // Act
    var result = PerformOperation();
    stopwatch.Stop();
    
    // Assert
    TestContext.WriteLine($"Operation took: {stopwatch.ElapsedMilliseconds}ms");
    Assert.IsTrue(stopwatch.ElapsedMilliseconds < 100);
    Assert.IsTrue(result);
}
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**: –†–∞–Ω–Ω–µ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**: –¢–µ—Å—Ç—ã –∫–∞–∫ –∂–∏–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å**: –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π 