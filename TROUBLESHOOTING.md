# üîß –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞

## üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–≥—Ä–æ–∫–∏ —Å—Ä–∞–∑—É –æ—Ç–∫–ª—é—á–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ Vector3 –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º

- –ö–ª–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª: `Vector3Serializable`
- –°–µ—Ä–≤–µ—Ä –æ–∂–∏–¥–∞–ª: `Vector3`

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ `Vector3Serializable` ‚Üí `Vector3`
- –û–±–Ω–æ–≤–∏–ª–∏ –≤—Å–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ —Ç–∏–ø–∞
- –î–æ–±–∞–≤–∏–ª–∏ —É–ª—É—á—à–µ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### 1. –î–æ–±–∞–≤—å—Ç–µ NetworkDebugger

–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `NetworkDebugger` –Ω–∞ –ª—é–±–æ–π –æ–±—ä–µ–∫—Ç –≤ —Å—Ü–µ–Ω–µ –¥–ª—è:

- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ (–∫–ª–∞–≤–∏—à–∞ P)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–∫–ª–∞–≤–∏—à–∞ T)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:

```
Received packet from [port], size: [bytes] bytes
Deserialized packet type: LoginPacket
Player [name] logged in from [port]
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞

–í Unity Console –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:

```
=== Testing Packet Serialization ===
‚úÖ LoginPacket test passed: TestPlayer
‚úÖ PlayerMovePacket test passed: pos(1.00, 2.00, 3.00)
‚úÖ PlayerShootPacket test passed: dir(0.00, 0.00, 1.00)
=== All serialization tests passed! ===
```

## üìù –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ Unity
2. –ù–∞–∂–º–∏—Ç–µ –∫–ª–∞–≤–∏—à—É **P** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `cd server/DeathRoom-Backend && dotnet run`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–∏–¥–∏—Ç–µ: `Server started on port 9050`
3. –°–µ—Ä–≤–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –í Unity –Ω–∞–∂–º–∏—Ç–µ –∫–ª–∞–≤–∏—à—É **T** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ - –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
   ```
   Peer connected: [port]. Waiting for login.
   Received packet from [port], size: [bytes] bytes
   Deserialized packet type: LoginPacket
   Player [name] logged in from [port]
   ```
3. –ò–≥—Ä–æ–∫ –ù–ï –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–∑—É –æ—Ç–∫–ª—é—á–∞—Ç—å—Å—è

### –®–∞–≥ 4: –î–≤–æ–π–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1. –°–æ–±–µ—Ä–∏—Ç–µ –±–∏–ª–¥ –∫–ª–∏–µ–Ω—Ç–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ç–æ—Ä–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä
4. –í –∫–∞–∂–¥–æ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –∏–≥—Ä–æ–∫–∞
5. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –≤ –æ–±–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö

## ‚ùó –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

```
Server logs:
Peer connected: 52341. Waiting for login.
Received packet from 52341, size: 23 bytes
Deserialized packet type: LoginPacket
Player Player1 logged in from 52341
Received packet from 52341, size: 32 bytes
Deserialized packet type: PlayerMovePacket

Client logs:
Connected to server: [NetPeer]
Processing WorldStatePacket with 1 players
My player name: Player1, My ID: 1
Player in packet: Player1 (ID: 1) at position 0, 0, 0
Set local player ID to: 1
```

### ‚ùå –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:

1. **"Unknown packet type received"**

   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–∞–∫–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Vector3
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ namespace

2. **"ERROR processing packet"**

   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–∫–∏
   - –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

3. **–ò–≥—Ä–æ–∫–∏ –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏–º–µ–Ω–∞ –∏–≥—Ä–æ–∫–æ–≤ —É–Ω–∏–∫–∞–ª—å–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ NetworkPlayer —Å–æ–∑–¥–∞—ë—Ç—Å—è

## üîÑ –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**

   ```bash
   cd server/DeathRoom-Backend
   dotnet clean
   dotnet run
   ```

2. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç:**

   - File ‚Üí Build Settings ‚Üí Build
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ—Ñ–∞–±—ã:**
   - LocalPlayer –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ UNITY_SETUP_GUIDE.md
   - NetworkPlayer –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ Animator –∏ NetworkPlayer.cs

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:

–í Client.cs –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –≤ Update():

```csharp
if (Time.frameCount % 300 == 0) // –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
{
    Debug.Log($"Client status: Connected={isConnected}, LocalPlayer={localPlayer != null}, NetworkPlayers={networkPlayers.Count}");
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞:

–°–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- –†–∞–∑–º–µ—Ä –ø–æ–ª—É—á–∞–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
- –¢–∏–ø –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å stack trace

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã!
